# ‚òÄÔ∏è –£–º–Ω—ã–π –î–≤—É—Ö–æ—Å–µ–≤–æ–π –°–æ–ª–Ω–µ—á–Ω—ã–π –¢—Ä–µ–∫–µ—Ä

<div align="center">

![Platform](https://img.shields.io/badge/Platform-ESP32-blue?style=for-the-badge&logo=espressif)
![Framework](https://img.shields.io/badge/Framework-Arduino%20%2B%20FreeRTOS-red?style=for-the-badge)
![Language](https://img.shields.io/badge/Language-C%2B%2B-purple?style=for-the-badge&logo=cplusplus)
![Build](https://img.shields.io/badge/Build-PlatformIO-orange?style=for-the-badge)

**–ê–≤—Ç–æ–Ω–æ–º–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–≤—É—Ö–æ—Å–µ–≤–æ–≥–æ —Å–ª–µ–∂–µ–Ω–∏—è –∑–∞ –°–æ–ª–Ω—Ü–µ–º –Ω–∞ –±–∞–∑–µ ESP32 –∏ FreeRTOS**

*–ê—Å—Ç—Ä–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã NOAA ¬∑ –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å SPA ¬∑ –ù–æ—á–Ω–æ–π —Ä–µ–∂–∏–º —ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–∂–µ–Ω–∏—è*

</div>

---

## üìñ –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–î–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç ‚Äî —ç—Ç–æ **–∞–≤—Ç–æ–Ω–æ–º–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å–ª–µ–∂–µ–Ω–∏—è –∑–∞ –°–æ–ª–Ω—Ü–µ–º (Solar Tracker)** –Ω–∞ –¥–≤—É—Ö –æ—Å—è—Ö. –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã—á–∏—Å–ª—è–µ—Ç –ø–æ–ª–æ–∂–µ–Ω–∏–µ –°–æ–ª–Ω—Ü–∞ –Ω–∞ –Ω–µ–±–æ—Å–∫–ª–æ–Ω–µ —Å –ø–æ–º–æ—â—å—é –∞—Å—Ç—Ä–æ–Ω–æ–º–∏—á–µ—Å–∫–∏—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ (–±–∏–±–ª–∏–æ—Ç–µ–∫–∞ NOAA) –∏ –Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–ª–Ω–µ—á–Ω—ã–µ –ø–∞–Ω–µ–ª–∏ —Ç–æ—á–Ω–æ –Ω–∞ –Ω–µ–≥–æ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è **–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –ö–ü–î**.

–ö–æ—Ä–ø—É—Å –∏ –º–µ—Ö–∞–Ω–∏—á–µ—Å–∫–∏–µ —É–∑–ª—ã —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ 3D –∏ –Ω–∞–ø–µ—á–∞—Ç–∞–Ω—ã –Ω–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–º 3D-–ø—Ä–∏–Ω—Ç–µ—Ä–µ **Bambu Lab P2S**. –ú–æ–∑–≥–æ–º —Å–∏—Å—Ç–µ–º—ã –≤—ã—Å—Ç—É–ø–∞–µ—Ç –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä **ESP32**, —Ä–∞–±–æ—Ç–∞—é—â–∏–π –ø–æ–¥ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ **FreeRTOS**.

---

## ‚ú® –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

| –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---|
| üß† **–î–≤—É—Ö—ä—è–¥–µ—Ä–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** | **–Ø–¥—Ä–æ 0** ‚Äî —Ü–µ–ª–∏–∫–æ–º –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä –∏ Wi-Fi. **–Ø–¥—Ä–æ 1** ‚Äî —É–ø—Ä–∞–≤–ª—è–µ—Ç –º–µ—Ö–∞–Ω–∏–∫–æ–π –∏ –∞—Å—Ç—Ä–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–º–∏ —Ä–∞—Å—á—ë—Ç–∞–º–∏. –ù–∏–∫–∞–∫–∏—Ö –∑–∞–≤–∏—Å–∞–Ω–∏–π. |
| üìê **–ê–ª–≥–æ—Ä–∏—Ç–º NOAA** | –°–∏—Å—Ç–µ–º–∞ **–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ñ–æ—Ç–æ—Ä–µ–∑–∏—Å—Ç–æ—Ä—ã**. –û–Ω–∞ –ø–æ–ª—É—á–∞–µ—Ç —Ç–æ—á–Ω–æ–µ –≤—Ä–µ–º—è –ø–æ NTP –∏ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã—á–∏—Å–ª—è–µ—Ç –∞–∑–∏–º—É—Ç –∏ –≤—ã—Å–æ—Ç—É –°–æ–ª–Ω—Ü–∞ –ø–æ GPS-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º. |
| üåô **–ù–æ—á–Ω–æ–π —Ä–µ–∂–∏–º** | –ö–æ–≥–¥–∞ –°–æ–ª–Ω—Ü–µ –∑–∞—Ö–æ–¥–∏—Ç (`altitude ‚â§ 0¬∞`), —Å–∏—Å—Ç–µ–º–∞ **–æ—Ç–∫–ª—é—á–∞–µ—Ç –ø–∏—Ç–∞–Ω–∏–µ —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥–æ–≤** (`.detach()`), –∏—Å–∫–ª—é—á–∞—è —Ä–∞—Å—Ö–æ–¥ —ç–Ω–µ—Ä–≥–∏–∏. –£—Ç—Ä–æ–º ‚Äî –ø–ª–∞–≤–Ω—ã–π –≤—ã—Ö–æ–¥ –∏–∑ —Å–Ω–∞. |
| ‚ö° **–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –≤–æ–ª—å—Ç–º–µ—Ç—Ä** | –ò–∑–º–µ—Ä–µ–Ω–∏–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –ø–∞–Ω–µ–ª–µ–π —á–µ—Ä–µ–∑ –ê–¶–ü (12-–±–∏—Ç) —Å –¥–µ–ª–∏—Ç–µ–ª–µ–º –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è (R1=10–∫–û–º, R2=4.7–∫–û–º). |
| üåê **Web SPA-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** | –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –æ–¥–Ω–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω—ã–π –¥–∞—à–±–æ—Ä–¥, –¥–æ—Å—Ç—É–ø–Ω—ã–π —Å —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∏–ª–∏ –ü–ö. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∫–∞–∂–¥—ã–µ **2 —Å–µ–∫—É–Ω–¥—ã** —á–µ—Ä–µ–∑ REST API. |
| üíæ **EEPROM-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** | –í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (Wi-Fi, GPS-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã, GMT, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —É–≥–ª–æ–≤) —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —ç–Ω–µ—Ä–≥–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º—É—é –ø–∞–º—è—Ç—å ESP32. |
| üîÑ **Smooth Move** | –ü–ª–∞–≤–Ω–æ–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥–æ–≤ –ø—Ä–∏ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏–∏ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π 40 –º—Å/—à–∞–≥ ‚Äî –±–µ–∑ —Ä—ã–≤–∫–æ–≤ –∏ –º–µ—Ö–∞–Ω–∏—á–µ—Å–∫–∏—Ö —É–¥–∞—Ä–æ–≤. |

---

## üîß –ê–ø–ø–∞—Ä–∞—Ç–Ω–∞—è —á–∞—Å—Ç—å (Hardware)

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ |
|---|---|
| **–ú–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä** | ESP32 DevKit V4 (2 —è–¥—Ä–∞, 240 –ú–ì—Ü, Wi-Fi 802.11 b/g/n) |
| **–°–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞** | MG996R ‚Äî **–ü–∏–Ω GPIO5** |
| **–°–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏** | MG996R ‚Äî **–ü–∏–Ω GPIO18** |
| **–í—Ö–æ–¥ –≤–æ–ª—å—Ç–º–µ—Ç—Ä–∞** | –ê–¶–ü ‚Äî **–ü–∏–Ω GPIO34** |
| **–°–æ–ª–Ω–µ—á–Ω—ã–µ –ø–∞–Ω–µ–ª–∏** | 4 —à—Ç. (115√ó115 –º–º, 6–í, 330 –º–ê –∫–∞–∂–¥–∞—è) ¬∑ –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ: **–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ** |
| **–ü–∏–∫–æ–≤–∞—è –º–æ—â–Ω–æ—Å—Ç—å** | ~6–í ¬∑ ~1.32–ê ¬∑ **‚âà7.9 –í—Ç** |
| **–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∑–∞—Ä—è–¥–∞** | TP4056 / H961-U |
| **–ê–∫–∫—É–º—É–ª—è—Ç–æ—Ä** | Li-Ion **10 000 –º–ê—á** |

### –°—Ö–µ–º–∞ –¥–µ–ª–∏—Ç–µ–ª—è –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è (–í–æ–ª—å—Ç–º–µ—Ç—Ä)

```
[Solar Panel +] ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ R1 (10 –∫–û–º) ‚îÄ‚îÄ‚îÄ‚îÄ [GPIO34 (ADC)] ‚îÄ‚îÄ‚îÄ‚îÄ R2 (4.7 –∫–û–º) ‚îÄ‚îÄ‚îÄ‚îÄ [GND]
                  ‚îî‚îÄ‚îÄ –∫ –Ω–∞–≥—Ä—É–∑–∫–µ
```

> **–ú–∞–∫—Å. –∏–∑–º–µ—Ä—è–µ–º–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ:** `3.3 –í √ó (10000 + 4700) / 4700 ‚âà 10.3 –í`

---

## üóÇÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
ESP32_MG996R_Solar_Algorithm/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îî‚îÄ‚îÄ main.cpp          # –í–µ—Å—å –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –ø—Ä–æ—à–∏–≤–∫–∏
‚îú‚îÄ‚îÄ include/              # –ó–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ lib/                  # –õ–æ–∫–∞–ª—å–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
‚îú‚îÄ‚îÄ test/                 # –¢–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ platformio.ini        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–±–æ—Ä–∫–∏ PlatformIO
‚îî‚îÄ‚îÄ README.md
```

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è

–ü—Ä–æ—à–∏–≤–∫–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ **–¥–≤—É—Ö–∑–∞–¥–∞—á–Ω–æ–π FreeRTOS –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ** —Å –∑–∞—â–∏—Ç–æ–π –æ–±—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ `SemaphoreHandle_t` (Mutex).

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    ESP32 (FreeRTOS)                 ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ  –Ø–î–†–û 0 (Core 0) ‚îÇ    ‚îÇ  –Ø–î–†–û 1 (Core 1)      ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  TaskWeb         ‚îÇ    ‚îÇ  TaskTracker           ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ                  ‚îÇ    ‚îÇ                        ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ WebServer     ‚îÇ    ‚îÇ  ‚Ä¢ –†–∞—Å—á—ë—Ç SunPosition  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ REST API      ‚îÇ‚óÑ‚îÄ‚îÄ‚ñ∫‚îÇ  ‚Ä¢ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Servo    ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ WiFi Handler  ‚îÇ ‚Üï  ‚îÇ  ‚Ä¢ –ê–¶–ü –≤–æ–ª—å—Ç–º–µ—Ç—Ä      ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ OTA Reboot    ‚îÇ –ú  ‚îÇ  ‚Ä¢ –ù–æ—á–Ω–æ–π —Ä–µ–∂–∏–º        ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò U  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                       T                             ‚îÇ
‚îÇ              –û–±—â–∏–µ –¥–∞–Ω–Ω—ã–µ (Mutex):                  ‚îÇ
‚îÇ       mode, sunAz, sunAlt, panelVolts,              ‚îÇ
‚îÇ       currentHor, currentVer, isNight               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### REST API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

| –ú–µ—Ç–æ–¥ | –ú–∞—Ä—à—Ä—É—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|---|---|---|
| `GET` | `/` | –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (SPA-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å) |
| `GET` | `/api/status` | –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã –≤ JSON (–≤—Ä–µ–º—è, –≤–æ–ª—å—Ç—ã, —É–≥–ª—ã, —Ä–µ–∂–∏–º) |
| `GET` | `/api/setMode?mode={0-3}` | –°–º–µ–Ω–∞ —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã |
| `GET` | `/api/setManual?h={deg}&v={deg}` | –†—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥–∞–º–∏ |
| `GET` | `/api/scan` | –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö Wi-Fi —Å–µ—Ç–µ–π |
| `GET` | `/api/saveCfg?...` | –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤ EEPROM |

---

## ‚öôÔ∏è –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã

| ‚Ññ  | –†–µ–∂–∏–º | –û–ø–∏—Å–∞–Ω–∏–µ |
|----|-------|----------|
| `0` | **–ê–í–¢–û (–°–õ–ï–ñ–ï–ù–ò–ï)** | –û—Å–Ω–æ–≤–Ω–æ–π —Ä–µ–∂–∏–º. –ê–ª–≥–æ—Ä–∏—Ç–º NOAA ‚Üí —Ä–∞—Å—á—ë—Ç –∞–∑–∏–º—É—Ç–∞/–≤—ã—Å–æ—Ç—ã ‚Üí –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–æ. –ù–æ—á—å—é ‚Äî –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ —Å–µ—Ä–≤–æ. |
| `1` | **–†–£–ß–ù–û–ô –†–ï–ñ–ò–ú** | –î–≤–∞ –ø–æ–ª–∑—É–Ω–∫–∞ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ (0¬∞‚Äì180¬∞ –∏ 0¬∞‚Äì90¬∞) –¥–ª—è –ø—Ä—è–º–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Å—è–º–∏. |
| `2` | **–ö–ê–õ–ò–ë–†–û–í–ö–ê (90¬∞)** | –ñ—ë—Å—Ç–∫–∞—è —Ñ–∏–∫—Å–∞—Ü–∏—è –æ–±–æ–∏—Ö —Å–µ—Ä–≤–æ –Ω–∞ 90¬∞ –¥–ª—è —Å–±–æ—Ä–∫–∏ –∏ –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏ –ø–æ –Æ–≥—É. |
| `3` | **–î–ï–ú–û** | –ü–ª–∞–≤–Ω—ã–π –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π sweep 0¬∞‚Üí180¬∞‚Üí0¬∞ –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç—É + –ø–∞—Ä–∞–±–æ–ª–∏—á–µ—Å–∫–∞—è –∏–º–∏—Ç–∞—Ü–∏—è –¥—É–≥–∏ –°–æ–ª–Ω—Ü–∞ –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏. |

### –õ–æ–≥–∏–∫–∞ –Ω–æ—á–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ (–ê–≤—Ç–æ)

```
sunAlt ‚â§ 0¬∞  ‚Üí  isNight = true  ‚Üí  servoHor.detach() + servoVer.detach()
                                   (—Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥—ã –æ–±–µ—Å—Ç–æ—á–µ–Ω—ã)

sunAlt > 0¬∞  ‚Üí  isNight = false ‚Üí  smoothMove()  (–ø–ª–∞–≤–Ω—ã–π –≤—ã—Ö–æ–¥ –∏–∑ —Å–Ω–∞)
                                ‚Üí  setServos()   (–æ–±—ã—á–Ω–æ–µ —Å–ª–µ–∂–µ–Ω–∏–µ)
```

---

## üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ —Å–±–æ—Ä–∫–∞

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (PlatformIO)

```ini
[env:esp32doit-devkit-v1]
platform  = espressif32
board     = esp32doit-devkit-v1
framework = arduino
monitor_speed = 115200
lib_deps =
    madhephaestus/ESP32Servo @ ^1.1.2
    gyverlibs/SunPosition    @ ^1.2.0
```

### –°–±–æ—Ä–∫–∞ –∏ –ø—Ä–æ—à–∏–≤–∫–∞

```bash
# 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone <repo-url>
cd ESP32_MG996R_Solar_Algorithm

# 2. –û—Ç–∫—Ä—ã—Ç—å –≤ VS Code —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º PlatformIO IDE

# 3. –°–æ–±—Ä–∞—Ç—å –ø—Ä–æ—à–∏–≤–∫—É
pio run

# 4. –ü—Ä–æ—à–∏—Ç—å ESP32
pio run --target upload

# 5. –û—Ç–∫—Ä—ã—Ç—å –º–æ–Ω–∏—Ç–æ—Ä –ø–æ—Ä—Ç–∞ (115200 –±–æ–¥)
pio device monitor
```

---

## üì± –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –®–∞–≥ 1. –ü–µ—Ä–≤–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ (–†–µ–∂–∏–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)

–ï—Å–ª–∏ —Ç—Ä–µ–∫–µ—Ä –≤–∫–ª—é—á–∞–µ—Ç—Å—è –≤–ø–µ—Ä–≤—ã–µ –∏–ª–∏ –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –∏–∑–≤–µ—Å—Ç–Ω–æ–π Wi-Fi —Å–µ—Ç–∏ ‚Äî –æ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç **—Ç–æ—á–∫—É –¥–æ—Å—Ç—É–ø–∞**.

1. –í–∫–ª—é—á–∏—Ç–µ –ø–∏—Ç–∞–Ω–∏–µ —Ç—Ä–µ–∫–µ—Ä–∞.
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ Wi-Fi —Å–µ—Ç–∏: **`SolarTracker`**
3. –ü–∞—Ä–æ–ª—å: **`12345678`**
4. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –∏ –≤–≤–µ–¥–∏—Ç–µ: **`192.168.4.1`**
5. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –Ω–∞ –≤–∫–ª–∞–¥–∫–µ **¬´–ù–ê–°–¢–†–û–ô–ö–ò¬ª**.
6. –ù–∞–∂–º–∏—Ç–µ **¬´–ü–û–ò–°–ö¬ª**, –≤—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à Wi-Fi –∏ –≤–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å.
7. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏–∑–º–µ–Ω–∏—Ç–µ GPS-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã.
   > –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: **–ê—Å—Ç–∞–Ω–∞** (–®–∏—Ä–æ—Ç–∞: `51.1333`, –î–æ–ª–≥–æ—Ç–∞: `71.4333`, GMT: `+5`)
8. –ù–∞–∂–º–∏—Ç–µ **¬´–°–û–•–†–ê–ù–ò–¢–¨ –î–ê–ù–ù–´–ï –í EEPROM¬ª** ‚Äî ESP32 –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—Å—è –∏ –ø–æ–¥–∫–ª—é—á–∏—Ç—Å—è –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É.

### –®–∞–≥ 2. –§–∏–∑–∏—á–µ—Å–∫–∞—è –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –Æ–≥—É

–î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –∞—Å—Ç—Ä–æ–Ω–æ–º–∏—á–µ—Å–∫–æ–≥–æ –∞–ª–≥–æ—Ä–∏—Ç–º–∞ —Ç—Ä–µ–∫–µ—Ä –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ **—Ñ–∏–∑–∏—á–µ—Å–∫–∏ –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –Æ–≥**.

1. –í–æ–π–¥–∏—Ç–µ –≤ —Ä–µ–∂–∏–º **¬´–ö–ê–õ–ò–ë–†–û–í–ö–ê (90¬∞)¬ª** ‚Äî –æ–±–∞ —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥–∞ –≤—Å—Ç–∞–Ω—É—Ç –ø–æ —Ü–µ–Ω—Ç—Ä—É.
2. –í–æ–∑—å–º–∏—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω, –æ—Ç–∫—Ä–æ–π—Ç–µ **–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ-–∫–æ–º–ø–∞—Å**.
3. **–ü–æ–≤–µ—Ä–Ω–∏—Ç–µ –≤–µ—Å—å –ø—Ä–∏–±–æ—Ä** —Ç–∞–∫, —á—Ç–æ–±—ã —Å–æ–ª–Ω–µ—á–Ω—ã–µ –ø–∞–Ω–µ–ª–∏ —Å–º–æ—Ç—Ä–µ–ª–∏ —Å—Ç—Ä–æ–≥–æ –Ω–∞ **–Æ–ì**.
4. –ó–∞—Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ –ø—Ä–∏–±–æ—Ä –≤ —ç—Ç–æ–º –ø–æ–ª–æ–∂–µ–Ω–∏–∏.
5. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –≤ —Ä–µ–∂–∏–º **¬´–ê–í–¢–û (–°–õ–ï–ñ–ï–ù–ò–ï)¬ª**.

### –®–∞–≥ 3. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –î–∞—à–±–æ—Ä–¥

–ù–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –¥–æ—Å—Ç—É–ø–Ω—ã **4 –∫–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è**:

| –ö–Ω–æ–ø–∫–∞ | –î–µ–π—Å—Ç–≤–∏–µ |
|--------|----------|
| ‚òÄÔ∏è **–ê–í–¢–û (–°–õ–ï–ñ–ï–ù–ò–ï)** | –û—Å–Ω–æ–≤–Ω–æ–π —Ä–∞–±–æ—á–∏–π —Ä–µ–∂–∏–º. –ù–æ—á—å—é –∫–Ω–æ–ø–∫–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è üåô —Ñ–∏–æ–ª–µ—Ç–æ–≤–æ–π. |
| üöÄ **–î–ï–ú–û –î–õ–Ø –ü–†–ï–ó–ï–ù–¢–ê–¶–ò–ò** | –¢—Ä–µ–∫–µ—Ä –Ω–∞—á–∏–Ω–∞–µ—Ç –ø–ª–∞–≤–Ω–æ –¥–≤–∏–≥–∞—Ç—å—Å—è, –∏–º–∏—Ç–∏—Ä—É—è –ø–æ–ª–Ω—ã–π —Å–≤–µ—Ç–æ–≤–æ–π –¥–µ–Ω—å. |
| üïπÔ∏è **–†–£–ß–ù–û–ô –†–ï–ñ–ò–ú** | –ü–æ—è–≤–ª—è—é—Ç—Å—è –¥–≤–∞ –ø–æ–ª–∑—É–Ω–∫–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Å—è–º–∏. |
| üìê **–ö–ê–õ–ò–ë–†–û–í–ö–ê (90¬∞)** | –§–∏–∫—Å–∞—Ü–∏—è —Å–µ—Ä–≤–æ –ø–æ —Ü–µ–Ω—Ç—Ä—É –¥–ª—è —Å–±–æ—Ä–∫–∏ –∏ –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏. |

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

> ### üî¥ –ü–∏—Ç–∞–Ω–∏–µ —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥–æ–≤
> **–ù–∏–∫–æ–≥–¥–∞** –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–π—Ç–µ MG996R –∫ –ø–∏–Ω–∞–º `3.3V` –∏–ª–∏ `5V` –Ω–∞ –ø–ª–∞—Ç–µ ESP32 –Ω–∞–ø—Ä—è–º—É—é!
> –ü–∏–∫–æ–≤—ã–π —Ç–æ–∫ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –¥–≤—É—Ö MG996R –º–æ–∂–µ—Ç –ø—Ä–µ–≤—ã—Å–∏—Ç—å **2–ê**, —á—Ç–æ **–≤—ã–≤–µ–¥–µ—Ç ESP32 –∏–∑ —Å—Ç—Ä–æ—è**.
> –ü–∏—Ç–∞–Ω–∏–µ —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥–æ–≤ –¥–æ–ª–∂–Ω–æ –∏–¥—Ç–∏ **–Ω–∞–ø—Ä—è–º—É—é –æ—Ç –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä–∞** (–∏–ª–∏ –º–æ–¥—É–ª—è H961-U).

> ### üü° –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —É–≥–ª–æ–≤ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏
> –ü–∞—Ä–∞–º–µ—Ç—Ä **¬´–ú–∏–Ω. –Ω–∞–∫–ª–æ–Ω¬ª** –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å **–Ω–µ –º–µ–Ω–µ–µ 15¬∞**.
> –ü—Ä–∏ –º–µ–Ω—å—à–∏—Ö –∑–Ω–∞—á–µ–Ω–∏—è—Ö —Å–æ–ª–Ω–µ—á–Ω—ã–µ –ø–∞–Ω–µ–ª–∏ –±—É–¥—É—Ç —Ñ–∏–∑–∏—á–µ—Å–∫–∏ **–∑–∞–¥–µ–≤–∞—Ç—å –æ—Å–Ω–æ–≤–∞–Ω–∏–µ –∫–æ—Ä–ø—É—Å–∞**.

---

## üìä –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---|---|
| –ü—Ä–æ—Ü–µ—Å—Å–æ—Ä | Xtensa LX6 Dual-Core, 240 –ú–ì—Ü |
| –û–° | FreeRTOS (ESP-IDF) |
| –°–≤—è–∑—å | Wi-Fi 802.11 b/g/n (2.4 –ì–ì—Ü) |
| –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏ | NTP (`pool.ntp.org`, `time.nist.gov`) |
| –†–∞–∑—Ä—è–¥–Ω–æ—Å—Ç—å –ê–¶–ü | 12 –±–∏—Ç (0‚Äì4095) |
| –û–ø—Ä–æ—Å –ê–¶–ü | 10 —É—Å—Ä–µ–¥–Ω—ë–Ω–Ω—ã—Ö –∏–∑–º–µ—Ä–µ–Ω–∏–π |
| –®–∞–≥ –ø–ª–∞–≤–Ω–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è | 1¬∞ / 40 –º—Å |
| –ü–µ—Ä–∏–æ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (–∞–≤—Ç–æ) | –∫–∞–∂–¥—ã–µ 2000 –º—Å |
| –ü–µ—Ä–∏–æ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (–¥–µ–º–æ) | –∫–∞–∂–¥—ã–µ 100 –º—Å |
| –î–∏–∞–ø–∞–∑–æ–Ω –∞–∑–∏–º—É—Ç–∞ | 0¬∞ ‚Äì 180¬∞ |
| –î–∏–∞–ø–∞–∑–æ–Ω –≤—ã—Å–æ—Ç—ã | 15¬∞ ‚Äì 90¬∞ (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è) |
| –•—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ | EEPROM (512 –±–∞–π—Ç) |
| –†–∞–∑–º–µ—Ä –ø—Ä–æ—à–∏–≤–∫–∏ | ~21 –ö–ë (main.cpp) |

---

## üìö –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

| –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ | –í–µ—Ä—Å–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|---|---|---|
| [ESP32Servo](https://github.com/madhephaestus/ESP32Servo) | `^1.1.2` | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥–∞–º–∏ MG996R —á–µ—Ä–µ–∑ PWM |
| [SunPosition](https://github.com/GyverLibs/SunPosition) | `^1.2.0` | –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –∞–∑–∏–º—É—Ç–∞ –∏ –≤—ã—Å–æ—Ç—ã –°–æ–ª–Ω—Ü–∞ (–∞–ª–≥–æ—Ä–∏—Ç–º NOAA) |
| `WiFi.h` | built-in | Wi-Fi Station + Access Point —Ä–µ–∂–∏–º |
| `WebServer.h` | built-in | HTTP —Å–µ—Ä–≤–µ—Ä –Ω–∞ –ø–æ—Ä—Ç—É 80 |
| `EEPROM.h` | built-in | –≠–Ω–µ—Ä–≥–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ |
| `FreeRTOS` | built-in | –ú–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–æ—Å—Ç—å –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è (Mutex) |
| `time.h` / NTP | built-in | –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç |

---

